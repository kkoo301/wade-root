<flow>

	<start>
		<desc>开始</desc>
		<name>start</name>
        <next>SS.QryInfoIntfSVC.getUserAllServiceForChl</next>
	</start>
	
	<service>
		<desc>获取用户信息</desc>
		<name>SS.QryInfoIntfSVC.getUserAllServiceForChl</name>
        <inparam>
            <param>
                <key>IN_MODE_CODE</key>
                <value>0</value>
            </param>
            <param>
                <key>X_GETMODE</key>
                <value>1</value>
            </param>
            <param>
                <key>SERIAL_NUMBER</key>
                <value>@context:SERIAL_NUMBER</value>
            </param>
        </inparam>
        <outparam>
            <param>
                <key>SERVICE_ID</key>
                <value>@selstr:SERVICE_ID</value>
            </param>
            <param>
                <key>OFFER_TYPE_CODE_LIST</key>
                <value>@sellist:SERVICE_ID->OFFER_CODE,"OFFER_TYPE=S"</value>
            </param>
        </outparam>
        <next>UPC.Out.OfferService.queryOffersByOfferTypesOfferCodes</next>
	</service>
	
	<service>
		<desc>获取产品配置</desc>
		<name>UPC.Out.OfferService.queryOffersByOfferTypesOfferCodes</name>
        <inparam>
            <param>
                <key>OFFER_TYPE_CODE_LIST</key>
                <value>@SS.QryInfoIntfSVC.getUserAllServiceForChl:outparam.OFFER_TYPE_CODE_LIST</value>
            </param>
        </inparam>
        <outparam>
            <param>
            	<key>OUTDATA</key>
            </param>
        </outparam>
        <next>merge</next>
	</service>
	
	<service>
		<desc>数据合并</desc>
		<name>merge</name>
		<impl>com.wade.svf.biz.merge.MergeNode</impl>
        <inparam>
        	<param>
                <key>merge.primary.key</key>
                <value>SERVICE_ID,OFFER_CODE</value>
            </param>
            <param>
                <key>merge.value1</key>
                <value>@SS.QryInfoIntfSVC.getUserAllServiceForChl:outparam.response</value>
            </param>
            <param>
                <key>merge.value2</key>
                <value>@UPC.Out.OfferService.queryOffersByOfferTypesOfferCodes:outparam.OUTDATA</value>
            </param>
            <param>
                <key>merge.select.key</key>
                <value>SERVICE_ID,START_DATE,END_DATE,OFFER_NAME</value>
            </param>
        </inparam>
        <outparam>
            <param>
            	<key>merge.data</key>
            </param>
        </outparam>
        <next>end</next>
	</service>
	
	<end>
		<desc>结束</desc>
		<name>end</name>
		<outparam>
			<param>
                <key>session</key>
                <value>{flow.session}</value>
            </param>
            <param>
                <key>sn</key>
                <value>@context:SERIAL_NUMBER</value>
            </param>
            <param>
                <key>OFFER_LIST</key>
                <value>@merge:outparam.merge.data</value>
            </param>
        </outparam>
	</end>
	
</flow>